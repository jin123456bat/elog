var old_button_content = '';
jQuery.fn.extend({
	loading:function(action,args){
		if(action == 'start')
		{
			args = args || {};
			old_button_content = $(this).html();
			var text = args.text;
			
			if(text==undefined)
			{
				var image = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIEAYAAAD9yHLdAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAFhlJREFUeNrt3XmQlMUZx/HuXeRYua8olyIqiiioGLytRDzQ4BFyWGVpxUpMrIp3rFga/5KUBqsihSZUgmgUklAxibcGRYWgiQENcRUiBhRQl0OQ5RR22X07f/y2MUsW2Jmd931mZr+ff57qgZ336Z53uue9up0DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgDbz1gkA5SiEEEKoqFBp1CjFIUMUBw50wQUXGhtVXrNGceVKX+ErfMWSJdb5AwAyogHjuONCEpKQTJ+u8tq1IS+rVytOnao4dKh1/QAgNeo4Bw1Sh3faaYqXXqrXzzpL8aijmv8yL12qR58+qtfDD6vc0JDfgHEgdXWKU6YoHnywdf0BIGfqwAYMULz3XsVly3LrENetU8f70EMqn3iidb1yq/+xxyouX57OgLEfSUhC8q9/KcZTYgBQhNRRdeig3uvuuxV37Chsr9jYqPjb32p7ffta1/v/2iGEEMKIEYq1tZkPHC2qqVF7DR5s3T4AsIc6qN691UG9/HK2HeNHHymedFLRtEMIweSI40DiEUkIgVNbAEypI+rcWXHhQtuOccMGFewuImv7M2eatUNOJk+23n8AtGPqiB57zLorbO7ddxW7dMmsHZKQhGTUKG03nmIrdjt3ckoLWSr5u2FQGOp4zjxTpauvts6nuZEjFW+8MbNNeuedv/VWFUrlrrHOnRVvuME6E7QPPEgI51w88pg/X6VzzrHOp2WbN+sBvCFD9MDdtm0Fb4emmwY0gKxfr1d797aueW6WL/fee++PPto6E5S3EvllhbRo4Bg4UKWzz7bOZ/969lTHPn58apvwzjv/5S+rUGoDR3TUURoIjzzSOhOUNwaQ9i644MLXvqaCL5Ej0gkT0n3/ww+3riH1QClgAGnvvPPOH3OMdRq5GT48tbcOLrg9R2QlzDvvfBnUA0Wtg3UCKAaHHGKdQW4GDEj3/UOwrmG50CnSY4/VwBxPqQ0YoAGuZ0+V47WmGKurdQ0nTjKJYsUAAkeH+T+8886vXWudRpsFF1yoqclscyGEEIYO1Xavv16vXnqp4rBhatcc3i0JSUj++U/93RNP6H2nTdPNE1u2ZNuY2BdOYbV3wQUXSq3DTPuX6apV1jUs9npowOjVS3HKFL26bNme25+9884PG5bfu3sNN37MGJXvuUflDz7Q9m65Zc/dcjDFAALn3LJl1hnk5r33Unvr4IILCxeqsGmTdU3zs2KFfqmvWFHod1YHPmKE2unNN/XqzTcrduyYbr369FG8/37FOXOUT6neLVf6GEDaO++8888/r0IJnMoKLrjw7LOpNUeFr/AVDQ0qxXYpIcEFF556quBv2zQtv0pvvNG2I4wC8M47f+65KixcGJcTMMsHaM/0BXzlFevJOPbvs8+UZ9eu2bRHqU5lUrhp3vW+RxzRfG6yYvXWW4pVVWnvH0BB6QvWsaN24Lgy3bhxihdcoDhypP49uzmdWp1/CCGEU09VTBLrrqBlP/qRTbuUwGSKSUhCct99Bat3s/05zkVWKh59NOv9BMiJvmBjx2qHnT1bcfPm1n3Rt29X/POf9eJXvmJdnz31CiGEMGOGdRfQvL3iAkqdOtl8zn37KsaLuEUkCUlIFi9WoXC/vPW+119vXb08GyVR/qeckvX+ArRIO2T37tpB44BR6F/qzz2n7fTrZ1vPTp2Uz9/+ZtsRrF+vfA47zPzzDyGEcNxxiq34oZCJNWsKfsqq6RThnvYvaa++ar3foJ2L02Nrh1y6NJsdf+VKRbsnxLX9nj0V490uWfnPfxSPPdb682+5XUaM0H6xYkW27RL2OiIr/MCqjVxxReb1StURR1jvN2hnmv8Se/vtzPf5eMrEeIlXJVNZqTzuukvlbdsKW9l4kfqRRxR79bL+/FvXLnGlwnjKr6EhnZ2hrk7tf//9Kqe38qDePx5hl4t4mzGQEe1406ZZ7/ryxz9at8eedklCEpIvfUl5TZqkmOtF1k8+2dO+SUhCcvzx1vVqc7uEEL64eeKhh1Rety6/zzsu6fvAA4rZrchYGndb5eq556z3j3JVIrOvZkdfoKOP1n3mS5fqVesnXuPzGaefrjmC/vEP23xayLBpYFFpyBC1X//+Km/erBin1li9WvUogedO8m2PEEIIcSGq0aP3tItzzrm4YmBjo+Inn+j5jZUr1W5LlmTdPso33h34+efW7VdY77yj9hw1yjoTlDl9kSZPtv7N1LJHHrFuH5Qn7V/Dhlnv4enYuNG6fcsVT6K3KE4CV0SCCy5MmKAvRGWldTooM8EFV7b7lfUZhPLFANIkPjilUhEuBeqddz5eTC+16ddRGsp1+vTsZiVubxhAmonn8It4Zb7ggguHHmqdBsqL5gDbvl2lwq81bya44EK5Doz2GECaqa+3zqC88kRpeu016wwKxjvv/IIF1mmUKwaQyDvv/IYNKsTZWIsVv6iQpqefts6gYIILLjzzjHUa5YoBpIlu80sSlRYtss6nZXGdB+4qQUqaTQdf6rfzLlmi70t1tXUm5YoBZG8pradQmLyefNI6DZQ3dbiffqpSXGmwBAUXXLjzTus00M7oNtm4VOemTdZ3sEtc5yE+gAakq/nkoWvXWn8DWq1pXRvr9kM7px3xxhutvw8yaZJ1e6B90v53+umKu3ZZfxP2L04Bw23uMKYd0XvF3//e5gvx4ouK5fqAF0qFflBdfbX2x7QmjczXli2KJ51k3U5AM9oxO3dWnDUrmy/Es8/qC9utm3X9gf+l/fPii5t33FaWL1csvmn/gRapY//BD7TjFmrBndpave9tt6lcwc0NKGqx49Z++/LL2QwYDQ3a3sMPq9y7dzb1rKhQHDhQMc4ZFteK797d+vNAiYlHCNqRrrtOcc6c/U+HHS/Kv/qq4k03ZfVFANKk/fjCC7X/v/SSyvX1bRswtm5VnD1b7ztyZGr5N83Cre39+MeKr7+uuHNn6/Jds0Zx5kzFiRPjukLWn09ainfKjhK3Zw1v77zzFRV6zmTnTuu8gCyoA+3ZU7fTnneevgdxhc14kTv+cFq/XjE+IPvOO/q7efN0W3FdXcHzS0ISkhNOUOlnP1N+48en0xpbtihOnqw4dar6g1J/zgYA2oE4WaoGtrhQXFwJM2uffKJ8xo2zbhcAwD6ow+7TRx32vHk2A8a+xLvZbr/dup0AAE3UMcc1699/33qoaB2enAcAM+qIKyt1xPHCC9ZDQm6SRPFb37JuRwBod9QBT5pkPRS0zbZtTF0EABlRxztggOKOHdZDQGE8+qh1uwJA2dMv9ocesu7yC6uxUfU6/njr9t2Xon0ORA1YVaX7wc84Q/dpDxyof62qUqyp0b8vXqz7xT/+2DpvANlRP9Gli0pxnZzYP5SB4IILU6aof7v1Vut0ipZG2iOP1A7xu98pfv5560bqePFp4UK9z4QJ1vUBkD597y+5xPpYITVJSELywQfW7Vy0ms8tVVdX2Nb/058UDz7Yup4ACk/9x/Tp1v18NkaMsG7vvZlN2qcGueMOnZr61a/0aseOhd3KxIk6BIyTvXXubFVfAGmJU5KUu+K7FpL5AKKOPM4589Ofpr5B77zzp56qgeSXv8y6vgBS1OzaaLkbNMg6g71lNoDoULNDB5XiWssZTlvunXf+mmuUx5gxmW0XQMrK6KL5fhXfqfiMO/CLL1Zh+HCb6nqvPG65xWb7AAqvHcxyHVxwofhm7834FNall1pXWC66qPkREYDStW6ddQap8847v3atdRp7y24ACS64oll6smdPxfZy7hQoZ0uWWGeQjaVLrTPYW8ZHIP37W1e4uPMBkLu//MU6g3TV1ChWV1tnsreMr4Fs3mxd4eZqa60zANAGwQUXnn9ehcKvXFgcnnlGKxiGYJ3J3jI+AvnwQ+sKS12dBrQ4sgMoRZriY/t2lZ56yjqfdMyaZZ3BvmQ8gLzwgnWF9Yvl1VdZoxwoN3FBpvp660zaLLjgwhNPqJ964w3rdMzprqcePfQg4caNtlMCfP3r1u0BoPD0/X7wQdv+pa3ilE5WjzsUMQ0kN95o88G89pqiL9pZiAHkT9/vqirFt96yHQjykIQkJNdea92ORSt24Gqoxx/P5lNZs0aR23aB9kD9y6BBzb//xe6BB6zbrWToA+7USQ33m9+k84EsX65YLM+fAMiSvv/DhikuXWo9RLRs6lTFykrr9ipZasArrojz3+f3QcT1Q+69V+/Tvbt1vQDYi/2B+oennrIdMLZuVbzySut2aauiuxagho2TLJ52muK55+quhMMO0+23nTqpHB/tX7RIcc4c3da3bZt1PQAULw0o55+v0uTJ6ldGj05na7t3K06frn7r7rvVT336qXU7AADyFH+wKn71q81PKa1alduRxe7dGpheeUXlm25SefBg63qmpeiOQACgWGgA6NtXpcMPV4xz6dXX68hlwwYdWXzwgY4syuA5FAAAAAAAAKA8cA0EAApMF9GHDlXpsssUzzlH8bjjFOPF9U6dvvhDF1zYuFHXVuLks/Eu07lz9e/xblOutQBAydOAcfLJii++qJgk6TxHEucS/MlPFItvrXQAwD6o4x4wQHH27HQHjAOJU7Vcc411uwAA9kEd9ejRiqtX2wwYBzJjhm4/7tjRur0AoN1Tx3z55YpxyqRi99prTOkEAEbUEcdrGzt2WA8J+ZkzR5HJGgEgdepwBw5ULJXp4PcjCUlI7rvPul0BoOyp133ySet+Px2nn27dvgBQdvRLfezYpp/tRndVpW3BAut2BoCyow72r3+17uKzcdFFbW2vCusPDACsqUONK5eefbZ1Ptn4/vfb+g4MIAAQXHBh4kTrNLJ14YUaOKuq8n2HDoVOSQn16qXS1Vcrjh+/Z0VB55xzHTtqrpeaGpXnzdO/z5qlOV5WrMi2IQEgzlXVXsSVXeNF9ZdfNktFF5++9z0NIJs25XdOrr5e7/PznysedJB1EwMof+p/1q61viph4+ab7Ro+CUlI7rmn4HVKQhKSuXMV/2e2SgAokDjlh3UXbmvKlHzbL+9rIGr4q67Sqag77ij4J+udd37cOMWpUwv+/gDgnXe+a1frNMwEF1zIf6qTnAcQDRxdu6rhs3qy8dprNVKeeGI22wPQLgQXXGhstE7DjHfe+d278/3zPI9ALr9c8ZBDsqllRVOe112XzfYAtAveeee3b1ehocE6HRu1tfn+Ze4DiHfe+fPPt6mo1XYBlCPvvfc+HoHEFQDbm/zves3zCCTejpu1QYN0KotZJQEU2uLF1hlkLrjgwptv5vvneQ4gIVjXGwAKa+5c6wyytW6dzii9+26+75DnAPLxxzYVrqlpfsgJAIXyxBOKu3ZZZ5KNP/xB/Wn+BwR5DiAGI3VwwYWXXsp8uwDKnjrSzZtVmjHDOp901dcrPvhg5pvWbbzduulaxPr12TzokiTa7pgx1k0PoHypn+nfX/3O1q3Wj/ilowieq1Mi11yTTYXL/RcBgGKifufOO627+sL67DMNkP36WbfvFw2dhCQk99+fToUXLFDs3Nm6ngDaD/U7lZWKzz9v3fW3ze7d6qfPO8+6XQ/Q4D/8oeKWLflVtKFB8Re/YA4sANbUD/XooX7p3/+2Hgryc9NN1u2YY4P366fEb79d5XnzVP7oI8W1a/X6m2+qPHmy4ogR1vkDwN7UPw0YoLhokfWQsH/xh/itt1q3GwCgSTwzog76scesh4rmtm5VfhMmWLcTAOAA1GGPG6cOvLo62wGjsVFx5kzFQw+1bg8AQI40kHTooI483p36978XdsCordV2pk9X+ZhjrOvtrRMAgHKljj7OWh6XzB05UnHwYD0gXVWlKUXiE+GffqoYJ3dctEj/b+FCLfndXmcNBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUiubT79VLcehQxYMPts4LAFAktNJW166Kd92luGJFyytzJYliXNz+O99RrKy0rgcAICPq+IcPV1y+PO/VHpOQhGTuXBV69rSuFwAgJerw+/dXh796dcGWDW42kHBEAgBlRx38jBkFGzha9N3vWtcTAFAgOkLo1k0d/K5d6Q4gb79tXV8AKFcVmW/RO+/8GWeo0KlTuhsbNUoDSe/emdcTAMpc9gOIc865Qw7JdnuHHmpTTwAoX0YDyJYt2W5v0yabegJA+TIaQBYtUgwh3e2sWaO4bp1NPQGgfGU+gHjvvfc1NSrNn5/u1mbO1PbSHqgAAJnRxe2TT07nbqyPPlLs1cu6ngCAlKij//a3CzOQrFunOHq0db0AABnR8yGnnKIB4PXXWzdgNDQozp6tvx80yLoeAMqP+pe+fdXfdOlinU+x8NYJ7Is+sCOP1HMjY8fq1R49FNevd8EFFxYs8BW+wlds2GCdL4DyowFj+HCVqqsVly3TtVXOdHSwTmBfNDCsWKFSjACQtd27FevrFbdvt84IAFAi4qkrRSZpBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKElFux5IsdN6JQcdpPVKrrxSr15yieKgQVqvZMsW/fv8+Sr/+teapn7jRuv8AQAZ03TOhx+uWF2d25K7tbWK48db1wMAkBEdcXTtqgFg2bK2rd2+a5feb8wY63oBAFKmDv+uu9o2cOzt9det6wUASJk6/CVLCjuAhKCBacgQ6/oBQK4qrBModurlfdPNBkcdlc5Whg+3ricA5IoB5AC89977EFSqr09nKzt3WtcTAHLFANJawQUXFi0q7JvW1SlWV1tXDwByxQDSWt5556dNK9j7BRdcmDVLz4Vs22ZdPSANOgXcpYviJZfomt9ZZ1nnBZjQF2HmzLZdOX//fcXeva3rA6RB+3dVleK+npd64AHrPIFMacevrFScNElx587WDRxPP61fYP36WdcDSJP294kT9/99aGyMz1dZ54v8MJVJGzUfEC64QKe64m25tbWK8+frYvx771nnC2RB34tx4/R9mDv3//+DCy7s2KFC7946lZvWTSoAgJIRb3/XQPLww82PPD7/XK9fdZV1ngCAIhev+Sl27mydDwAAAAAAAAAAraWLot26cY4bANCiPXfXhBBCuOEGxZUrW76/f948lU891TpvAIAxDQjTpuX25H1dnQaU886zzh8AkLE4h1FuA8feVq3S+3ToYF2fbNutRw/Vf+BA63wAIHNx7qK2DSChaQGtM8+0rk9q7dQ0M4Eq+/TTTZVOmtf/vfcUx461zhcAUqcO7/HHCzOAfPOb1vVJrZ1CCCG8+GLr2mHDBsX+/a3zBvLBdO7IwapVbX4L77zzH35oXZNC00AweLBK55/funbo21fxssus8wfywQCCHMyapZgk+f39O+8oLl5sXZOC884736dPfn/ct691+gCQOv3Svu22/zu3v18bN+rvTjjBOv9026Vjxz2nprgmBAAtU8d3wQWKL72k3nD9esV4t9X06Ypxevvyp/pfdpnigdaJmTrVOl+gLVgPBEiBBohjjtG6F9/4hl7t3l1x7lytf9HCOhkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAP6L+3KemfpbrE3AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA1LTE2VDA5OjQwOjMxKzA4OjAw84cLAAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNS0xNlQwOTo0MDozMSswODowMILas7wAAABPdEVYdHN2ZzpiYXNlLXVyaQBmaWxlOi8vL2hvbWUvYWRtaW4vaWNvbi1mb250L3RtcC9pY29uXzdkc25rcHF1OXptdmFlbWkvbG9hZGluZy5zdmfh0KLKAAAAAElFTkSuQmCC';
				var button_height = $(this).height();
				var img = $('<img src="'+image+'">').css({
					width:button_height*0.9,
					height:button_height*0.9,
				    margin: '0 auto',
					animation: 'button_loading_rotate 5s linear infinite',
					'-moz-animation':'button_loading_rotate 5s linear infinite', /* Firefox */
					'-webkit-animation':'button_loading_rotate 5s linear infinite', /* Safari and Chrome */
					'-o-animation':'button_loading_rotate 5s linear infinite', /* Opera */
				})
				$(this).empty().append(img);
			}
			else
			{
				$(this).html(text);
			}
			
			$(this).addClass('button-loading-hover-status');
			
			var click = args.click || 'disabled';
			if(click == 'disabled')
			{
				$(this).prop('disabled',true);
			}
			else if(typeof click == 'function')
			{
				$(this).on('click',function(e){
					click(e);
				});
			}
		}
		else if(action == 'stop')
		{
			$(this).removeClass('button-loading-hover-status');
			$(this).empty().html(old_button_content).prop('disabled',false);
		}
	}
});